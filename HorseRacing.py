from turtle import *
from time import sleep
from random import choice
import tkinter as tk

# Lines 9 to 275 AI generated (shapes of a horse, and parts of a jockey)
# I gave ChatGPT images of a horse silhouette and a dissected jockey silhouette cut into different pieces
# In the original version, the shape lists are in an imported python file 'from horse_shapes import *'

arm = [(-154.94, -44.42), (-149.34, -18.420000000000005), (-136.54000000000002, 7.179999999999995), (-101.74000000000001, 38.779999999999994), (-44.94000000000001, 35.58), (27.05999999999999, 17.179999999999996), (31.859999999999992, 46.779999999999994), (47.05999999999999, 86.38), (63.459999999999994, 115.17999999999999), (92.66, 112.38), (117.85999999999999, 93.97999999999999), (115.85999999999999, 43.58), (106.25999999999999, -10.420000000000005), (87.85999999999999, -59.220000000000006), (71.46, -78.82000000000001), (27.859999999999992, -76.02000000000001), (23.859999999999992, -79.22), (-22.140000000000008, -81.22), (-81.74000000000001, -79.22), (-121.74000000000001, -70.02000000000001)]

body = [(-64.864, 128.752), (-18.06400000000001, 122.752), (5.93599999999999, 143.552), (32.33599999999999, 134.752), (62.73599999999999, 116.752), (77.93599999999999, 101.55199999999999), (87.136, 82.752), (89.93599999999999, 27.552), (98.73599999999999, 1.1519999999999981), (118.33599999999998, -32.048), (118.33599999999998, -56.448), (83.93599999999999, -84.048), (57.13599999999999, -129.248), (41.93599999999999, -141.248), (14.73599999999999, -153.248), (-42.86400000000001, -155.248), (-56.46400000000001, -150.048), (-72.06400000000001, -128.448), (-69.26400000000001, -78.048), (-78.06400000000001, -45.648), (-89.66400000000002, -28.848000000000003), (-107.26400000000001, 23.951999999999998), (-110.06400000000001, 74.752), (-98.06400000000001, 104.352), (-82.46400000000001, 119.952)]

boot = [(-158.43697478991595, -2.9445378151260457), (-155.23697478991596, 12.255462184873954), (-155.23697478991596, 25.455462184873955), (-152.03697478991597, 30.255462184873956), (-151.63697478991597, 35.05546218487395), (-149.23697478991596, 37.05546218487395), (-148.83697478991596, 43.85546218487396), (-146.03697478991597, 45.85546218487396), (-145.23697478991596, 50.655462184873954), (-136.03697478991597, 62.655462184873954), (-135.63697478991597, 66.65546218487395), (-119.63697478991597, 82.25546218487395), (-114.83697478991596, 89.45546218487395), (-110.83697478991596, 90.65546218487395), (-106.83697478991596, 95.05546218487396), (-106.03697478991596, 99.85546218487396), (-103.63697478991597, 99.85546218487396), (-94.83697478991596, 90.65546218487395), (-90.83697478991596, 90.25546218487395), (-82.03697478991596, 81.45546218487395), (-78.03697478991596, 80.65546218487395), (-72.83697478991596, 74.65546218487395), (-68.43697478991596, 74.25546218487395), (-63.23697478991596, 68.25546218487395), (-58.83697478991596, 67.85546218487396), (-52.83697478991596, 61.45546218487395), (-49.23697478991596, 61.45546218487395), (-43.63697478991596, 55.45546218487395), (-32.83697478991596, 51.45546218487395), (-20.836974789915963, 42.255462184873956), (-6.836974789915962, 38.655462184873954), (-4.836974789915962, 35.85546218487396), (-0.436974789915962, 35.45546218487395), (2.363025210084038, 32.255462184873956), (9.163025210084038, 32.255462184873956), (14.763025210084038, 26.655462184873954), (24.763025210084038, 22.655462184873954), (45.563025210084035, 22.655462184873954), (62.76302521008404, 32.655462184873954), (86.36302521008403, 56.255462184873956), (89.56302521008404, 63.05546218487395), (98.36302521008403, 73.05546218487396), (99.56302521008404, 78.25546218487395), (102.36302521008403, 81.45546218487395), (102.76302521008404, 86.25546218487395), (108.36302521008403, 91.45546218487395), (109.16302521008404, 95.85546218487396), (113.16302521008404, 99.85546218487396), (120.76302521008404, 103.45546218487395), (136.76302521008404, 103.45546218487395), (143.56302521008405, 97.05546218487396), (147.96302521008403, 97.05546218487396), (147.96302521008403, 25.855462184873954), (145.56302521008405, 23.855462184873954), (145.56302521008405, 15.455462184873955), (142.36302521008403, 10.655462184873954), (141.96302521008403, 0.6554621848739544), (139.56302521008405, -1.3445378151260456), (139.16302521008404, -6.1445378151260455), (136.36302521008403, -9.344537815126046), (135.96302521008403, -15.344537815126046), (132.76302521008404, -18.144537815126046), (132.76302521008404, -21.744537815126044), (129.56302521008405, -25.344537815126046), (129.56302521008405, -31.344537815126046), (123.96302521008404, -37.344537815126046), (122.76302521008404, -41.744537815126044), (119.96302521008404, -43.744537815126044), (119.56302521008404, -48.14453781512604), (116.76302521008404, -50.14453781512604), (115.96302521008404, -54.14453781512604), (113.56302521008404, -56.54453781512605), (113.56302521008404, -79.34453781512605), (109.96302521008404, -83.34453781512605), (109.96302521008404, -94.94453781512604), (107.16302521008404, -98.14453781512604), (106.36302521008403, -102.14453781512604), (100.76302521008404, -108.14453781512604), (99.96302521008404, -112.14453781512604), (94.76302521008404, -114.14453781512604), (89.96302521008404, -119.74453781512605), (85.96302521008404, -120.14453781512604), (82.76302521008404, -123.34453781512605), (49.16302521008404, -123.34453781512605), (47.563025210084035, -118.14453781512604), (17.56302521008404, -88.14453781512604), (13.563025210084039, -87.74453781512605), (7.963025210084038, -81.74453781512605), (3.163025210084038, -80.94453781512604), (-2.036974789915962, -75.34453781512605), (-12.836974789915962, -71.34453781512605), (-17.63697478991596, -65.74453781512605), (-21.63697478991596, -65.34453781512605), (-24.036974789915963, -62.54453781512605), (-28.036974789915963, -62.14453781512604), (-30.836974789915963, -58.94453781512605), (-40.436974789915965, -55.344537815126046), (-43.63697478991596, -52.54453781512605), (-47.23697478991596, -52.54453781512605), (-49.63697478991596, -49.744537815126044), (-53.63697478991596, -49.344537815126046), (-56.03697478991596, -46.54453781512605), (-60.03697478991596, -46.14453781512604), (-69.63697478991597, -39.744537815126044), (-82.43697478991596, -36.54453781512605), (-85.63697478991597, -33.344537815126046), (-98.43697478991596, -30.144537815126046), (-101.63697478991597, -26.944537815126047), (-106.43697478991596, -26.544537815126045), (-110.03697478991596, -23.744537815126044), (-115.63697478991597, -23.344537815126046), (-117.63697478991597, -20.544537815126045), (-131.63697478991597, -16.944537815126047), (-133.63697478991597, -14.144537815126046), (-138.43697478991595, -13.744537815126046), (-142.03697478991597, -10.944537815126045), (-147.63697478991597, -10.544537815126045), (-149.63697478991597, -4.544537815126046), (-155.63697478991597, -4.544537815126046)]

hair = [(-13.709090909090913, 41.43030303030302), (-9.309090909090912, 41.43030303030302), (-8.109090909090913, 39.030303030303024), (-3.709090909090912, 38.630303030303025), (-1.3090909090909122, 35.43030303030302), (3.4909090909090876, 35.030303030303024), (28.690909090909088, 9.830303030303025), (29.090909090909086, 5.030303030303026), (31.49090909090909, 3.8303030303030257), (31.49090909090909, -0.9696969696969745), (26.690909090909088, -0.9696969696969745), (25.49090909090909, -2.1696969696969743), (25.49090909090909, -16.569696969696974), (22.29090909090909, -18.969696969696976), (21.890909090909087, -23.769696969696973), (17.090909090909086, -28.569696969696974), (13.090909090909088, -28.569696969696974), (10.690909090909088, -31.769696969696973), (5.890909090909088, -32.16969696969697), (3.4909090909090876, -35.369696969696975), (-8.109090909090913, -35.76969696969697), (-9.309090909090912, -38.16969696969697), (-17.70909090909091, -38.16969696969697), (-17.70909090909091, -32.969696969696976), (-24.109090909090913, -30.969696969696976), (-24.50909090909091, -22.969696969696976), (-26.909090909090914, -21.769696969696973), (-26.909090909090914, 24.630303030303025), (-24.50909090909091, 25.830303030303025), (-24.109090909090913, 30.630303030303025), (-20.909090909090914, 33.030303030303024), (-20.50909090909091, 37.83030303030303), (-14.909090909090912, 39.030303030303024)]

hand = [(-75.44150943396227, 27.147169811320758), (-71.04150943396226, 32.34716981132076), (-71.04150943396226, 40.74716981132076), (-69.04150943396226, 42.74716981132076), (-55.04150943396227, 42.74716981132076), (-43.841509433962266, 30.74716981132076), (-35.841509433962266, 30.34716981132076), (-16.641509433962266, 54.34716981132076), (-10.641509433962266, 55.14716981132076), (-7.041509433962267, 59.14716981132076), (18.95849056603773, 59.14716981132076), (22.558490566037733, 55.14716981132076), (30.95849056603773, 55.14716981132076), (34.55849056603773, 51.14716981132076), (48.158490566037734, 46.74716981132076), (62.158490566037734, 32.74716981132076), (62.158490566037734, 28.34716981132076), (65.35849056603773, 26.34716981132076), (65.35849056603773, 16.34716981132076), (62.55849056603773, 15.14716981132076), (61.758490566037736, 9.14716981132076), (54.55849056603773, 3.1471698113207593), (53.758490566037736, -2.8528301886792407), (50.158490566037734, -5.652830188679241), (49.758490566037736, -10.85283018867924), (46.158490566037734, -13.652830188679241), (45.758490566037736, -18.852830188679242), (42.158490566037734, -21.65283018867924), (41.758490566037736, -26.852830188679242), (38.158490566037734, -29.65283018867924), (37.35849056603773, -35.65283018867924), (33.35849056603773, -39.25283018867924), (33.35849056603773, -43.65283018867924), (29.358490566037734, -48.45283018867924), (11.358490566037734, -48.45283018867924), (10.158490566037733, -45.65283018867924), (4.958490566037733, -45.25283018867924), (1.358490566037733, -41.25283018867924), (-3.841509433962267, -40.85283018867924), (-6.641509433962267, -37.25283018867924), (-15.041509433962267, -37.25283018867924), (-18.241509433962268, -33.65283018867924), (-27.841509433962266, -32.05283018867924), (-31.841509433962266, -28.852830188679242), (-44.64150943396227, -28.852830188679242), (-47.841509433962266, -24.852830188679242), (-56.64150943396227, -24.852830188679242), (-59.44150943396227, -21.25283018867924), (-65.44150943396227, -20.45283018867924), (-67.44150943396227, -13.25283018867924), (-71.04150943396226, -10.45283018867924), (-71.04150943396226, 6.347169811320759), (-75.44150943396227, 11.14716981132076)]

hat = [(-28.8375, -97.325), (-52.8375, -79.725), (-62.0375, -61.325), (-64.8375, -41.325), (-66.8375, -40.525), (-66.8375, -22.525), (-61.6375, -12.125), (-61.6375, -6.525), (-44.8375, 24.275), (-23.6375, 45.475), (-20.4375, 45.475), (-15.2375, 51.075), (-9.2375, 51.075), (1.5625, 56.675), (31.1625, 57.075), (37.5625, 83.875), (45.9625, 89.875), (52.7625, 89.875), (57.5625, 76.675), (55.5625, 45.875), (46.7625, 28.275), (38.7625, 23.875), (32.7625, 3.075), (29.9625, 0.675), (29.9625, -8.125), (24.3625, -21.725), (24.3625, -33.325), (21.5625, -35.725), (21.5625, -52.925), (18.7625, -55.725), (15.9625, -102.125), (-8.0375, -102.125)]

head = [(-62.1, -62.29), (-60.1, -34.29), (-57.3, -31.889999999999997), (-54.5, -5.889999999999998), (-51.3, -2.289999999999998), (-51.7, 8.110000000000003), (-45.7, 20.110000000000003), (-45.7, 28.910000000000004), (-40.1, 39.71), (-37.3, 54.510000000000005), (-22.9, 83.31), (-18.1, 87.71000000000001), (-12.5, 84.91), (-8.5, 87.31), (5.1, 73.31), (17.1, 67.31), (23.1, 67.31), (25.5, 64.51), (34.3, 64.51), (41.1, 54.910000000000004), (41.1, 43.31), (47.1, 31.310000000000002), (56.7, 18.910000000000004), (66.3, 12.910000000000002), (63.9, 1.3100000000000023), (49.9, -11.889999999999997), (43.9, -24.29), (43.9, -45.089999999999996), (49.9, -54.29), (49.9, -61.089999999999996), (39.5, -68.28999999999999), (27.9, -68.28999999999999), (27.1, -70.28999999999999), (-0.9, -68.28999999999999), (-4.9, -65.09), (-13.3, -65.09), (-15.7, -62.29), (-40.1, -62.29), (-52.5, -68.28999999999999), (-58.1, -62.69)]

leg = [(-138.68800000000002, -107.328), (-151.888, -72.128), (-151.888, -46.528), (-145.888, -40.528), (-118.28800000000001, -37.727999999999994), (-66.68800000000002, -16.528), (-53.88800000000001, 10.272000000000002), (-40.28800000000001, 23.872000000000003), (-18.28800000000001, 36.272000000000006), (10.51199999999999, 82.272), (47.71199999999999, 108.672), (88.51199999999999, 119.47200000000001), (116.112, 119.47200000000001), (139.712, 113.072), (146.112, 99.072), (119.71199999999999, 75.872), (109.31199999999998, 49.872), (108.91199999999999, 28.672000000000004), (91.71199999999999, 24.672000000000004), (73.31199999999998, -6.527999999999997), (32.511999999999986, -50.528), (5.711999999999989, -100.128), (-25.08800000000001, -130.928), (-64.28800000000001, -151.328), (-114.68800000000002, -131.328)]

saddle = [
    (-65.81, 204.55), (-17.51, 191.75), (26.59, 166.15), (46.09, 147.75),
    (68.89, 89.35), (81.79, 7.75), (78.49, -84.65), (63.19, -135.45),
    (51.49, -153.85), (29.59, -171.05), (-3.71, -181.45), (-34.31, -181.45),
    (-45.71, -171.05), (-49.61, -160.65), (-32.51, -45.45), (-30.71, 24.95),
    (-42.11, 108.95), (-53.51, 151.75), (-70.61, 192.15)
]

horse_shape = [[(-8.278688524590162, 33.01639344262295),
  (-16.778688524590162, 27.01639344262295),
  (-15.278688524590162, 26.01639344262295),
  (-16.278688524590162, 20.01639344262295),
  (-15.778688524590162, 16.01639344262295),
  (-12.278688524590162, 11.016393442622949),
  (-12.778688524590162, 10.016393442622949),
  (-10.278688524590162, 9.016393442622949),
  (-8.778688524590162, 5.016393442622949),
  (-9.778688524590162, -6.483606557377051),
  (-6.778688524590162, -16.98360655737705),
  (-3.2786885245901622, -23.48360655737705),
  (-3.2786885245901622, -30.98360655737705),
  (-2.7786885245901622, -29.98360655737705),
  (-2.2786885245901622, -30.98360655737705),
  (-1.2786885245901622, -30.48360655737705),
  (-1.7786885245901622, -28.98360655737705),
  (-0.7786885245901622, -28.98360655737705),
  (-0.27868852459016225, -27.48360655737705),
  (-1.2786885245901622, -24.98360655737705),
  (-0.7786885245901622, -22.48360655737705),
  (-2.7786885245901622, -17.48360655737705),
  (-6.278688524590162, -12.983606557377051),
  (-5.778688524590162, -12.483606557377051),
  (-1.2786885245901622, -12.983606557377051),
  (1.2213114754098378, -14.983606557377051),
  (1.7213114754098378, -17.98360655737705),
  (5.221311475409838, -21.48360655737705),
  (8.221311475409838, -26.98360655737705),
  (9.221311475409838, -26.98360655737705),
  (9.221311475409838, -25.48360655737705),
  (4.221311475409838, -16.48360655737705),
  (4.721311475409838, -15.983606557377051),
  (12.221311475409838, -19.48360655737705),
  (15.721311475409838, -17.98360655737705),
  (15.721311475409838, -15.983606557377051),
  (12.721311475409838, -17.98360655737705),
  (8.721311475409838, -16.48360655737705),
  (-1.2786885245901622, -3.983606557377051),
  (0.7213114754098378, -0.48360655737705116),
  (2.2213114754098378, 5.516393442622949),
  (1.7213114754098378, 13.516393442622949),
  (2.7213114754098378, 14.516393442622949),
  (13.721311475409838, 16.51639344262295),
  (15.221311475409838, 18.51639344262295),
  (15.221311475409838, 20.51639344262295),
  (12.721311475409838, 17.51639344262295),
  (1.2213114754098378, 17.51639344262295),
  (2.7213114754098378, 24.51639344262295),
  (7.721311475409838, 29.01639344262295),
  (9.221311475409838, 29.01639344262295),
  (9.721311475409838, 30.51639344262295),
  (5.721311475409838, 29.51639344262295),
  (0.7213114754098378, 25.01639344262295),
  (0.22131147540983775, 22.01639344262295),
  (-1.7786885245901622, 19.51639344262295),
  (-5.778688524590162, 19.51639344262295),
  (-9.778688524590162, 24.01639344262295),
  (-9.778688524590162, 25.51639344262295),
  (-8.778688524590162, 26.01639344262295),
  (-6.278688524590162, 31.51639344262295)],
 [(-11.369230769230768, 31.746153846153845),
  (-17.869230769230768, 23.246153846153845),
  (-16.369230769230768, 23.246153846153845),
  (-15.369230769230768, 17.246153846153845),
  (-13.869230769230768, 14.246153846153845),
  (-11.869230769230768, 13.246153846153845),
  (-9.869230769230768, 6.246153846153845),
  (-9.869230769230768, 3.2461538461538453),
  (-11.369230769230768, -1.2538461538461547),
  (-11.369230769230768, -8.253846153846155),
  (-8.869230769230768, -15.753846153846155),
  (-3.369230769230768, -20.753846153846155),
  (-4.869230769230768, -25.753846153846155),
  (-1.869230769230768, -23.753846153846155),
  (-1.369230769230768, -19.253846153846155),
  (-2.369230769230768, -18.253846153846155),
  (-1.869230769230768, -17.253846153846155),
  (-3.369230769230768, -15.753846153846155),
  (-2.869230769230768, -15.253846153846155),
  (-7.369230769230768, -12.253846153846155),
  (-4.369230769230768, -10.753846153846155),
  (-1.869230769230768, -10.753846153846155),
  (-1.369230769230768, -15.753846153846155),
  (3.130769230769232, -16.753846153846155),
  (5.630769230769232, -16.253846153846155),
  (7.130769230769232, -18.253846153846155),
  (8.630769230769232, -18.253846153846155),
  (6.630769230769232, -15.253846153846155),
  (3.130769230769232, -15.253846153846155),
  (0.6307692307692321, -13.753846153846155),
  (1.630769230769232, -12.253846153846155),
  (7.130769230769232, -9.753846153846155),
  (8.630769230769232, -11.253846153846155),
  (10.130769230769232, -10.753846153846155),
  (7.130769230769232, -8.753846153846155),
  (5.630769230769232, -8.753846153846155),
  (2.130769230769232, -10.753846153846155),
  (1.130769230769232, -10.253846153846155),
  (0.6307692307692321, -5.753846153846155),
  (-2.369230769230768, -2.2538461538461547),
  (0.6307692307692321, 2.7461538461538453),
  (2.130769230769232, 8.746153846153845),
  (6.130769230769232, 7.746153846153845),
  (8.130769230769232, 6.246153846153845),
  (7.130769230769232, 2.7461538461538453),
  (7.630769230769232, 1.2461538461538453),
  (6.630769230769232, 0.7461538461538453),
  (7.130769230769232, -1.7538461538461547),
  (8.630769230769232, 1.2461538461538453),
  (9.130769230769232, 8.246153846153845),
  (6.130769230769232, 9.746153846153845),
  (9.630769230769232, 10.746153846153845),
  (14.130769230769232, 10.746153846153845),
  (15.130769230769232, 14.246153846153845),
  (13.630769230769232, 13.246153846153845),
  (13.130769230769232, 11.746153846153845),
  (9.130769230769232, 11.746153846153845),
  (2.630769230769232, 13.246153846153845),
  (-0.3692307692307679, 16.746153846153845),
  (-2.869230769230768, 17.746153846153845),
  (-6.369230769230768, 21.246153846153845),
  (-10.369230769230768, 23.746153846153845),
  (-10.369230769230768, 27.246153846153845),
  (-8.869230769230768, 30.746153846153845),
  (-9.369230769230768, 31.746153846153845)],
 [(-10.889830508474578, 22.54237288135593),
  (-16.389830508474578, 18.04237288135593),
  (-18.889830508474578, 14.54237288135593),
  (-17.389830508474578, 13.04237288135593),
  (-16.389830508474578, 8.04237288135593),
  (-13.889830508474578, 7.042372881355931),
  (-12.889830508474578, 4.042372881355931),
  (-11.389830508474578, 3.5423728813559308),
  (-9.889830508474578, 0.04237288135593076),
  (-10.889830508474578, -5.957627118644069),
  (-10.889830508474578, -13.45762711864407),
  (-3.389830508474578, -27.45762711864407),
  (-0.8898305084745779, -29.45762711864407),
  (3.110169491525422, -30.45762711864407),
  (3.610169491525422, -29.45762711864407),
  (5.610169491525422, -30.45762711864407),
  (4.110169491525422, -28.45762711864407),
  (1.610169491525422, -27.45762711864407),
  (-3.889830508474578, -20.95762711864407),
  (-7.389830508474578, -18.45762711864407),
  (-3.889830508474578, -17.95762711864407),
  (3.610169491525422, -10.45762711864407),
  (7.110169491525422, -10.45762711864407),
  (15.110169491525422, -2.9576271186440692),
  (14.110169491525422, -0.9576271186440692),
  (11.610169491525422, -4.457627118644069),
  (7.610169491525422, -7.457627118644069),
  (7.110169491525422, -5.957627118644069),
  (8.610169491525422, -3.4576271186440692),
  (8.610169491525422, -1.4576271186440692),
  (10.610169491525422, 0.5423728813559308),
  (10.110169491525422, 1.5423728813559308),
  (8.110169491525422, 0.04237288135593076),
  (4.610169491525422, -6.957627118644069),
  (0.1101694915254221, -6.457627118644069),
  (1.610169491525422, -3.4576271186440692),
  (2.110169491525422, 3.5423728813559308),
  (5.610169491525422, 9.04237288135593),
  (6.110169491525422, 5.042372881355931),
  (4.110169491525422, 4.542372881355931),
  (3.610169491525422, 3.0423728813559308),
  (4.110169491525422, 2.5423728813559308),
  (7.610169491525422, 5.042372881355931),
  (6.610169491525422, 10.54237288135593),
  (4.110169491525422, 10.04237288135593),
  (2.610169491525422, 8.04237288135593),
  (1.610169491525422, 8.54237288135593),
  (1.610169491525422, 13.04237288135593),
  (2.610169491525422, 14.04237288135593),
  (10.110169491525422, 13.54237288135593),
  (10.610169491525422, 15.04237288135593),
  (1.610169491525422, 15.54237288135593),
  (0.1101694915254221, 13.54237288135593),
  (-0.3898305084745779, 10.54237288135593),
  (-1.389830508474578, 10.04237288135593),
  (-11.389830508474578, 15.04237288135593),
  (-10.389830508474578, 19.54237288135593),
  (-9.389830508474578, 20.04237288135593),
  (-9.389830508474578, 21.54237288135593)],
 [(-10.723214285714285, 26.32142857142857),
  (-18.723214285714285, 19.82142857142857),
  (-17.223214285714285, 19.32142857142857),
  (-17.723214285714285, 12.32142857142857),
  (-14.223214285714285, 6.321428571428569),
  (-13.223214285714285, 5.821428571428569),
  (-12.723214285714285, 6.821428571428569),
  (-11.223214285714285, 4.321428571428569),
  (-10.223214285714285, 0.3214285714285694),
  (-10.723214285714285, -10.67857142857143),
  (-5.223214285714285, -22.67857142857143),
  (-4.223214285714285, -28.17857142857143),
  (-3.2232142857142847, -29.17857142857143),
  (-2.7232142857142847, -28.67857142857143),
  (0.7767857142857153, -32.67857142857143),
  (3.7767857142857153, -33.17857142857143),
  (-0.7232142857142847, -27.17857142857143),
  (-2.7232142857142847, -21.67857142857143),
  (-6.723214285714285, -17.17857142857143),
  (0.7767857142857153, -16.67857142857143),
  (4.776785714285715, -20.67857142857143),
  (11.276785714285715, -22.67857142857143),
  (14.276785714285715, -21.67857142857143),
  (14.276785714285715, -19.17857142857143),
  (12.276785714285715, -21.17857142857143),
  (7.276785714285715, -19.17857142857143),
  (0.7767857142857153, -11.67857142857143),
  (0.7767857142857153, -10.67857142857143),
  (3.7767857142857153, -8.67857142857143),
  (7.276785714285715, -8.67857142857143),
  (13.776785714285715, -3.1785714285714306),
  (14.776785714285715, -1.6785714285714306),
  (14.776785714285715, 0.3214285714285694),
  (13.776785714285715, 0.3214285714285694),
  (12.776785714285715, -1.6785714285714306),
  (8.776785714285715, -5.178571428571431),
  (-0.2232142857142847, -5.178571428571431),
  (1.2767857142857153, -0.1785714285714306),
  (0.2767857142857153, 12.32142857142857),
  (2.7767857142857153, 15.82142857142857),
  (7.276785714285715, 15.82142857142857),
  (6.776785714285715, 16.82142857142857),
  (4.776785714285715, 16.82142857142857),
  (4.276785714285715, 17.82142857142857),
  (9.276785714285715, 25.32142857142857),
  (7.776785714285715, 26.82142857142857),
  (6.276785714285715, 22.82142857142857),
  (1.7767857142857153, 17.82142857142857),
  (0.2767857142857153, 18.82142857142857),
  (-2.2232142857142847, 18.82142857142857),
  (-3.2232142857142847, 13.82142857142857),
  (-7.223214285714285, 14.82142857142857),
  (-11.723214285714285, 18.82142857142857),
  (-9.723214285714285, 23.32142857142857),
  (-8.223214285714285, 24.32142857142857),
  (-8.723214285714285, 26.32142857142857)]]

# I made dictionaries to sort all of the horse parts.
# Each  dictionary includes: 
# name     - the object name.
# array    - the shape list.
# colour   - the colour of the object. If 'None', then it is the jockey colour.
# position - the position relative to the horse, which is multiplied by the size of the horse.
# size     - some of the objects when scanned by ChatGPT were larger than others. I need to resize them to 
#            the correct size relative to the jockey, and is also multiplied by the size of the horse.

shapes = [{"name": "saddle", "array": saddle, "colour":"sienna3", "position":(-40, -70), "size":0.7}, 
          {"name": "body", "array": body, "colour":None, "position":(0, 0), "size":0.75},
          {"name": "arm", "array": arm, "colour":None, "position":(40, -10), "size":0.55}, 
          {"name": "boot", "array": boot, "colour":"gray30", "position":(-55, -170), "size":0.4}, 
          {"name": "leg", "array": leg, "colour":"gray90", "position":(-70, -50), "size":0.55}, 
          {"name": "hand", "array": hand, "colour":"PeachPuff", "position":(110, -67), "size":0.4}, 
          {"name": "hat", "array": hat, "colour":None, "position":(150, 82), "size":0.7}, 
          {"name": "head", "array": head, "colour":"PeachPuff", "position":(130, 35), "size":0.75}, 
          {"name": "hair", "array": hair, "colour":"SaddleBrown", "position":(90, 70), "size":0.6}, 
          {"name": "horseA", "array": horse_shape[0]}, 
          {"name": "horseB", "array": horse_shape[1]}, 
          {"name": "horseC", "array": horse_shape[2]}, 
          {"name": "horseD", "array": horse_shape[3]}
          ]

def racerupd(): # This function is called whenever the amount of racers is changed.
    global jockeys, racers, coloured_btns, racernum, jockeys, racers, racersb, jockeysb, horseposx, horseposy, size, jockeysize, end, wageredon

    scr.tracer(0) # Disables automatic updates, effectively pauses screen.

    racernum = spinnum.get() # Gets the number of racers on the spinwheel

    # Calculations for the sizes & positions (of jockeys)
    size = (2.1 + sizechange) - racernum * sizechange
    jockeysize = size / 18
    horseposx = 4 * size
    horseposy = 15 * size
    end = 560 - (35 * size)

    # Fixed bug - if you chose a colour and change the spinwheel until the colour you chose is gone, 
    #             the colour doesn't exist and raises an error
    if wageredon in colours:
        if colours.index(wageredon) > racernum: 
            wageredon = None
    
    if racernum != len(racers):
        # Changing the amount of racers, jockeys, and coloured buttons
        for jockey in jockeys:
            for part in jockey:
                part.hideturtle()
                part.clear()
                del part
        for racer in racers:
            racer.hideturtle()
            racer.clear()
            del racer
        for button in coloured_btns:
            button.destroy()
        jockeys = []
        racers = []
        coloured_btns = []
        for i in range(racernum):
            btn = tk.Button(root,
                text=colours[i],
                bg=colours[i], fg="white",
                activebackground=brighten(colours[i], -20),
                activeforeground="white",
                font=(mainfont, 12, "bold"),
                relief="raised", bd=3,  # Border style: flat, groove, raised, ridge, solid, sunken
                width=12, height=1,
                command=lambda c=colours[i]: wager(c),
                padx=0,
                pady=5
            )

            # 2 Rows:

            if racernum / 2 > i:
                btn.place(relx=0.5, x=-400 + i * 120, y=40, anchor="n")
            else:
                btn.place(relx=0.5, x=-400 + (i - racernum / 2) * 120, y=98, anchor="n")

            # 1 Row:
            # btn.place(relx=0.5, x=-400 + i * 100, y=60, anchor="n")

            coloured_btns.append(btn)

        base_racer.goto(-600, -330)
        change = 500 / (racernum + 1)
        base_racer.sety(base_racer.ycor() + change)
        base_racer.shapesize(size)
        
        for x in range(racernum):
            # Changing jockey colours
            cl = base_racer.clone()
            cl.showturtle()
            cl.color("OrangeRed4")
            racers.append(cl)
            base_racer.sety(base_racer.ycor() + change)
            spd.append(0)
            jockey = []
            for i in range(9):
                part = base_part.clone()
                part.shape(shapes[i]["name"])
                part.goto(shapes[i]["position"][0] * jockeysize + horseposx + cl.xcor(), shapes[i]["position"][1] * jockeysize + horseposy + cl.ycor())
                part.shapesize(shapes[i]["size"] * jockeysize)
                if shapes[i]["colour"] == None:
                    part.color(colours[x])
                else:
                    part.color(shapes[i]["colour"])
                jockey.append(part)
            jockeys.append(jockey)
    
    # For changing the position of the spinwheel to infront of the buttons
    # racerspin.place(relx=0.5, x=-400 + 120 * int(racernum / 2 + 0.5), y=70, anchor="n")

    # Make backup list for after the race
    racersb = racers.copy()
    jockeysb = jockeys.copy()

    # Enable updates, all of the function is updated in 1 update
    update()
    scr.tracer(0)

def brighten(color, percent=20):
    # AI wrote this - to brighten the button when clicked, or use a negative value to darken the button when the game starts
    percent = percent / 100
    r, g, b = [v // 256 for v in root.winfo_rgb(color)]
    r = max(0, min(255, int(r + (255 - r) * percent))) if percent >= 0 else max(0, min(255, int(r * (1 + percent))))
    g = max(0, min(255, int(g + (255 - g) * percent))) if percent >= 0 else max(0, min(255, int(g * (1 + percent))))
    b = max(0, min(255, int(b + (255 - b) * percent))) if percent >= 0 else max(0, min(255, int(b * (1 + percent))))
    return f"#{r:02x}{g:02x}{b:02x}"

def wager(colour):
    # when you click a coloured button for a horse to 'wager' on,
    # it brightens and gives you a 'you win!' if the horse wins or 'you lose!' if it loses.

    global wageredon
    for i, button in enumerate(coloured_btns):
        button.config(bg=colours[i], activebackground=brighten(colours[i], -20))
    if wageredon == colour:
        wageredon = None
    else:
        wageredon = colour
        coloured_btns[colours.index(colour)].config(bg=brighten(colour, 40), activebackground=brighten(colour, 40))


def drawline(colour, thickness, startpos, endpos, turt):
    # Easier to draw a line in any colour, thickness, at any position to start/end, with a specific turtle for easier 'turtle.clear()'
    turt.penup()
    turt.pencolor(colour)
    turt.pensize(thickness)
    turt.goto(startpos)
    turt.pendown()
    turt.goto(endpos)
    turt.penup()

def jockey_move(horse, jock):
  # Moves all jockey parts 1 step.
  # Is quite precise with the positions, the horse animation causes the horse's saddle to move backwards and forwards,
  # so it adapts with the ' - ([0, 5, 8, 6][frame % 4] * jockeysize))'
  for i, par in enumerate(jock):
    par.goto((horse.xcor() + horseposx + shapes[i]["position"][0] * jockeysize - ([0, 5, 8, 6][frame % 4] * jockeysize)), horse.ycor() + horseposy + shapes[i]["position"][1] * jockeysize)

def drawrails():
    # Just to draw rails.
    drawline("white", 7, (-590, -320), (590, -320), lines)
    lines.goto(-590, -300)
    raillines = 16
    for x in range(1, raillines + 2):
        drawline("white", 7, (lines.xcor(), -320), (lines.xcor(), -360), lines)
        lines.fd(1180 / raillines)
    drawline("white", 7, (-590, 190), (590, 190), lines)
    lines.goto(-590, 190)
    raillines = 16
    for x in range(1, raillines + 2):
        drawline("white", 7, (lines.xcor(), 190), (lines.xcor(), 150), lines)
        lines.fd(1180 / raillines)

def start(): # The horse race
    global frame, infront, racersb, racers, jockeys, infronty, infrontx, wageredon

    # Buttons prepare by being disabled and changing colour

    infront = -1000
    racerspin.config(state="disabled")
    racerspin.config(
        state="disabled",
        disabledbackground="gray80"
    )

    start_btn.config(state="disabled")
    start_btn.config(bg="gray70", activebackground="gray70")

    for button in coloured_btns:
        button.config(state="disabled")
        button.config(bg="gray60", activebackground="gray60")
    
    if not(wageredon == None): # 'If' statement to fix error of if you didn't wager
        coloured_btns[colours.index(wageredon)].config(bg="gray80", activebackground="gray80")

    winners = []
    finished = 0

    # Countdown

    cntdown.write("3", align="center", font=(mainfont, 50, "normal"))
    update()
    cntdown.clear()
    sleep(1)
    cntdown.write("2", align="center", font=(mainfont, 50, "normal"))
    update()
    cntdown.clear()
    sleep(1)
    cntdown.write("1", align="center", font=(mainfont, 50, "normal"))
    update()
    cntdown.clear()
    sleep(1)
    crown.showturtle()

    # Prepares speed - the speed changes every few steps
    for i in range(racernum):
        spd[i] = choice([2, 2, 2, 2, 3, 3, 4]) * size * 1.4

    while True:
        for a in range(choice([2, 3, 3, 4])): # Random choice to decide how often to change speed
            for x in range(5):
                for i, racer in enumerate(racers):
                    racer.shape(horse_shapes[((frame + i) % 4) - 1])
                    racer.fd(spd[i])
                    jockey_move(racer, jockeys[i])
                    if racer.xcor() > end - 1: # When horse finishes
                        racer.setx(end)
                        finished += 1
                        winners.append(colours[racersb.index(racer)])
                        racer.shape(horse_shapes[1])
                        del racers[i]
                        del jockeys[i]
                        
                    if infront < racer.xcor(): # Line to show who is in the front - Variable set
                        infront = racer.xcor()
                        infronty = racer.ycor()
                 # Line to show who is in the front - Drawing line
                front.clear()
                crown.goto(infront + (35 * size), infronty)
                drawline("yellow", 4, (infront + (35 * size), 170), (infront + (35 * size), -340), front)
                update()

                # Check if all racers have finished
                if racernum == finished:
                    break
            
            # Frame of the horse animation
            frame += 1
            if frame == 4:
                frame = 0
        # Check if all racers have finished
        if racernum == finished:
                break
        for i in range(racernum):
            # Rigged Win:
            # if wageredon == None:
            #     spd[i] = choice([2, 2, 2, 2, 3, 3, 4]) * size * 1.4
            # else:
            #     if colours[i] == wageredon:
            #         spd[i] = 4.2 * size * 1.4
            #     else:
            #         spd[i] = choice([2, 2, 2, 2, 3, 3, 4]) * size * 1.4
            
            # Non-Rigged:
            spd[i] = choice([2, 2, 2, 2, 3, 3, 4]) * (size / 2 + 1) * 1.4
    
    if not(wageredon == None):
        pn.goto(500, 265)
        if winners[0] == wageredon:
            pn.color("LimeGreen")
            pn.write("You Win!", align="center", font=(mainfont, 40, "bold"))
        elif not(winners[0] == wageredon):
            pn.color("red")
            pn.write("You Lose", align="center", font=(mainfont, 40, "bold"))
    
    pn.goto(0, 18 * racernum - 85)
    for num, colour in enumerate(winners):
        pn.color(colour)
        pn.write(str(num + 1) + ". " + colour, align="center", font=(mainfont, 20, "normal"))
        pn.sety(pn.ycor() - 40)

    update()
    sleep(3)

    # Resets everything:
    
    while not(racersb[0].xcor() == -600):
        for i, racer in enumerate(racersb):
            racer.fd(-50)
            if racer.xcor() < -600:
                racer.setx(-600)
            jockey_move(racer, jockeysb[i])
        update()
    jockeys = jockeysb.copy()
    racers = racersb.copy()

    pn.clear()

    racerspin.config(state="readonly")
    racerspin.config(bg="gray95", activebackground="gray95", readonlybackground="gray95")

    start_btn.config(state="normal")
    start_btn.config(bg="LimeGreen", activebackground="LimeGreen")

    for i, button in enumerate(coloured_btns):
        button.config(state="normal")
        button.config(bg=colours[i], activebackground=colours[i])
    wageredon = None

    crown.goto(1000, 1000)
    front.clear()

    update()

colours = ["red", "blue", "gold", "green", "orange", "magenta", "navy", "turquoise", "salmon", "brown", "chocolate", "DarkGreen", "SlateGrey", "orchid", "PaleGreen"]
# racernum = int(input("How many racers? "))
wageredon = None
size = 1.6
jockeysize = size / 18
horseposx = 4 * size
horseposy = 15 * size
sizechange = 0.13
jockeys = []
spd = []
racers = []
saddles = []
mainfont = "Cascadia Mono"
coloured_btns = []

# Setting up mainly:

scr = Screen()
scr.bgcolor("LimeGreen")
scrTk = scr.getcanvas().winfo_toplevel()
scrTk.attributes("-fullscreen", True)
scr.tracer(0)

root = scr._root
root.bind("<Escape>", lambda e: bye())

spinnum = tk.IntVar(value=6)
racernum = spinnum.get()

start_btn = tk.Button(root,
    text="Start\nRace",
    bg="LimeGreen", fg="white",
    activebackground="green",
    activeforeground="white",
    font=(mainfont, 25, "bold"),
    relief="groove", bd=4,
    width=8, height=2,
    command=start
)
start_btn.place(relx=0.5, x=-570, y=30, anchor="n")

racerspin = tk.Spinbox(
    root,
    from_=1,
    to=10,
    textvariable=spinnum,
    font=("Arial", 30),
    width=2,
    state="readonly",
    bg="gray95",
    readonlybackground="gray95",
    command=racerupd
)
# racerspin.place(relx=0.5, x=-400 + 120 * int(racernum / 2 + 0.5), y=70, anchor="n")
racerspin.place(relx=0.5, x=200, y=70, anchor="n")

for i in shapes:
    register_shape(i["name"], tuple(i["array"]))

base_racer = Turtle()
base_racer.shape("horseA")
base_racer.shapesize(size)
base_racer.speed(0)
base_racer.penup()
base_racer.goto(-600, -330)
base_racer.hideturtle()

for i in shapes:
    register_shape(i["name"], tuple(i["array"]))

base_part = Turtle()
base_part.penup()
base_part.speed(0)
base_part.goto(0, 0)
base_part.shapesize(jockeysize / 3)
base_part.goto(-560, 300)

crown = Turtle()
crown.penup()
crown.speed(0)
crown.shapesize(2)
crown.hideturtle()

pn = Turtle()
pn.penup()
pn.speed(0)
pn.hideturtle()

cntdown = Turtle()
cntdown.penup()
cntdown.speed(0)
cntdown.hideturtle()
cntdown.sety(-85)

lines = Turtle()
lines.ht()
lines.speed(0)

drawline("OliveDrab1", 8, (-560, 170), (-560, -340), lines)

for x in range(1, 5):
    drawline("#EEEEEE", 4, (-560 + 224 * x, 170), (-560 + 224 * x, -340), lines)

drawline("OliveDrab1", 8, (560, 170), (560, -340), lines)

lines.goto(-1000, 210)
lines.color("#AAAAAA")
lines.fillcolor("gray90")
lines.pendown()
lines.begin_fill()
lines.pensize(3)

for i in range(4):
    lines.fd(2000)
    lines.left(90)

lines.end_fill()
lines.penup()

front = Turtle()
front.ht()
front.speed(0)

drawrails()

infront = -10000
infronty = 0
end = 560 - (35 * size)
finished = 0
racersb = racers.copy()
jockeysb = jockeys.copy()
winners = []
frame = 0
horse_shapes = ["horseA", "horseB", "horseC", "horseD"]

scr.listen()
scr.onkeypress(bye, "Escape")

update()
racerupd()

scr.mainloop()
